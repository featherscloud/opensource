# Pinion

> A fast and typesafe code generator

Pinion is a CLI toolkit that allows to create flexible, customizable and typesafe generators in TypeScript.
Creating and maintaining CLI tooling and generators can be a very time consuming task. Pinion helps with this by

- Putting generator templates as close to your project as necessary
- TypeScript first to give you full flexibility over what your generators can do and when
- Using JavaScript template strings instead of hard to debug templating syntaxes like EJS or Mustache
- A functional programming approach that keeps your generators robust and easy to follow

## Usage

Pinion is always installed as a development dependency and its command line is available via `npx pinion`.
The following example will create a new `app` template with some defaults:

```
npm install @feathersjs/pinion --save-dev
```

This will create a `.pinion/app` folder with two files in it.

```ts
// .pinion/app/pinion.ts
import { PinionContext, generator, runFolder, prompt } from '@feathersjs/pinion'

// The main types of your generator
export interface Context extends PinionContext {
  name: string
}

export const generate = (ctx: Context) => generator(ctx)
  // Ask prompts here (using Inquirer) that should be available to all generators
  .then(prompt([{
    type: 'input',
    name: 'name',
    message: 'What is the name of your app?'
  }]))
  // Run all *.tpl.ts generators in this folder
  .then(runFolder(__dirname))
```

```ts
// .pinion/app/readme.tpls.ts
import { generator, renderTemplate, to } from '@feathersjs/pinion'
import { Context } from './pinion'

const template = ({ name }: Context) =>
`# Hello ${name}

This is a new template generated by Pinion
`

export const generate = (ctx: Context) => generator(ctx)
  .then(renderTemplate(template, to('readme.md')))
```